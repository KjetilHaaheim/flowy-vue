(function(t){function e(e){for(var o,s,a=e[0],d=e[1],l=e[2],u=0,f=[];u<a.length;u++)s=a[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(t[o]=d[o]);c&&c(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,a=1;a<n.length;a++){var d=n[a];0!==r[d]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},i=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/flowy-vue/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],d=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var c=d;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"054d":function(t,e,n){"use strict";var o=n("31fd"),r=n.n(o);r.a},"071f":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flowy-block mr-24px relative"},[n("draggable",{attrs:{"with-handle":!1,"draggable-mirror":{xAxis:!1,appendTo:"body"},group:"flowy",data:Object.assign({},{type:"new"},t.nodeData)}},[t._t("preview")],2)],1)},r=[],i=n("5530"),s={props:{},data:function(){return{node:{componentName:"",props:{}}}},mounted:function(){var t=this.$scopedSlots.node()[0];this.node.componentName=t.componentOptions.tag,this.node.props=Object(i["a"])(Object(i["a"])({},t.componentOptions.propsData),t.data.attrs)},destroyed:function(){},computed:{nodeData:function(){return this.node}},methods:{remove:function(){}}},a=s,d=n("2877"),l=Object(d["a"])(a,o,r,!1,null,null,null);e["a"]=l.exports},"2bdc":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flowy-block mr-24px relative"},[t._t("default"),n(t.component,t._b({ref:"block",tag:"component"},"component",Object.assign({},t.$props,t.$attrs,t.passedProps),!1))],2)},r=[],i={props:{node:{type:Object,required:!0},remove:{type:Function,required:!0}},data:function(){return{}},mounted:function(){},destroyed:function(){},computed:{component:function(){return this.node.nodeComponent},passedProps:function(){return this.node.data}},methods:{onDragEnd:function(t){},onDragStart:function(t){}},render:function(t){var e=this.$scopedSlots.default()[0];return e}},s=i,a=n("2877"),d=Object(a["a"])(s,o,r,!1,null,null,null);e["a"]=d.exports},"31fd":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=n("b635"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"example-block p-2 bg-white mb-4 rounded border border-gray-300",style:{width:t.width+"px"}},[n("div",{staticClass:"flex flex-row flex-no-wrap ml-2"},[n("div",{staticClass:"flex-none flex\n     flex-row flex-no-wrap items-start justify-start",staticStyle:{width:"60px"}},[t._m(0),n("div",{staticClass:"flex-grow bg-blue-100 p-1 ml-2 mr-2 rounded"},[n("img",{attrs:{src:"demo_assets/"+t.icon+".svg"}})])]),n("div",{staticClass:"flex-grow flex flex-col ml-2"},[n("div",{staticClass:"font-bold text-base text-gray-800"},[t._v(" "+t._s(t.title)+" ")]),n("div",{staticClass:"text-xs text-gray-600"},[t._v(" "+t._s(t.description)+" ")])])])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-none drag-handle mt-2 mr-2"},[n("img",{staticStyle:{width:"10px"},attrs:{src:"demo_assets/grabme.svg"}})])}],a={props:{width:{default:320},icon:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},remove:{type:Function,required:!1}},data:function(){return{}},mounted:function(){},destroyed:function(){},methods:{}},d=a,l=(n("054d"),n("2877")),c=Object(l["a"])(d,i,s,!1,null,null,null),u=c.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"example-node relative  bg-white rounded border border-gray-300",style:{width:t.width+"px"}},[n("div",{staticClass:"flex flex-col border-b border-gray-300"},[n("div",{staticClass:"flex flex-row flex-no-wrap justify-between items-center p-4"},[n("div",{staticClass:"flex flex-row flex-no-wrap justify-start items-center"},[n("div",{staticClass:"flex-shrink bg-blue-2 mr-2"},[n("img",{attrs:{src:"demo_assets/"+t.icon+".svg"}})]),n("div",{staticClass:"font-bold text-md text-gray-800"},[t._v(" "+t._s(t.title)+" "),n("span",{staticClass:"text-xs text-gray-400"},[t._v("node id: "+t._s(t.node.id))])])]),n("div",{on:{click:function(e){e.stopPropagation(),t.dropdown=!t.dropdown}}},[n("img",{staticClass:"drag-handle",attrs:{src:"demo_assets/grabme.svg"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.dropdown,expression:"dropdown"}],staticClass:"absolute z-50 -ml-10 py-2 bg-white shadow rounded text-xs"},[n("span",{staticClass:"cursor-pointer p-2 hover:bg-gray-200",on:{click:function(e){return t.remove()}}},[t._v("remove")])])])])]),n("div",{staticClass:"flex flex-row flex-no-wrap ml-4 mb-4"},[n("div",{staticClass:"flex-grow flex flex-col"},[n("div",{staticClass:"mt-2 text-sm text-gray-700",domProps:{innerHTML:t._s(t.description)}})])])])},p=[],h={props:{width:{default:200},remove:{type:Function,required:!0},node:{type:Object,required:!0},icon:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,required:!0}},data:function(){return{dropdown:!1}},mounted:function(){},destroyed:function(){},methods:{}},g=h,v=(n("5d60"),Object(l["a"])(g,f,p,!1,null,null,null)),m=v.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"h-screen w-screen bg-gray-200 flex flex-col flex-no-wrap overflow-none"},[t._m(0),n("div",{staticClass:"flex-grow overflow-hidden flex flex-row flex-no-wrap"},[n("div",{staticClass:"z-40 flex-shrink pl-6 pt-6 bg-white border-r border-grey-400"},[n("div",{staticClass:"side z-50"},[n("div",{staticClass:"text-lg font-bold mb-4"},[t._v("Blocks")]),n("div",t._l(t.blocks,(function(e,o){return n("flowy-new-block",{key:o,scopedSlots:t._u([{key:"preview",fn:function(t){return[n("demo-block",{attrs:{title:e.preview.title,description:e.preview.description,icon:e.preview.icon}})]}},{key:"node",fn:function(t){return[n("demo-node",{attrs:{title:e.node.title,description:e.node.description,icon:e.node.icon}})]}}],null,!0)})})),1)])]),n("div",{staticClass:"flex-grow overflow-auto"},[n("flowy",{staticClass:"h-full w-full p-6",attrs:{nodes:t.nodes,beforeAdd:t.beforeAdd,beforeMove:t.beforeMove,onEnterDragFn:t.onEnter},on:{"drag-start":t.onDragStart,add:t.add,move:t.move,remove:t.remove}})],1)])])},w=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white p-6 shadow z-10"},[n("div",{staticClass:"text-lg"},[t._v("Vue Flowy")])])}],y=(n("a434"),n("5530")),x=n("2769"),C=n.n(x),_=n("51f5"),k=n.n(_);function N(){return Math.floor(1e4*Math.random())+1}function D(t){var e=N();while(void 0!==C()(t,{id:e}))e=N();return e}var S=D,O=n("97ab"),$=n.n(O),j=n("66d6"),P=n.n(j),E={name:"app",components:{},data:function(){return{holder:[],dragging:!1,blocks:P.a,nodes:$.a}},methods:{onDropBlock:function(t){},beforeAdd:function(){return console.log("before add"),!0},afterAdd:function(){},onEnterDrop:function(t){return console.log("entered drop"),!0},beforeMove:function(t){var e=t.to,n=t.from;return console.log(e,n),!n||"1"!==n.id},onEnter:function(){},addNode:function(t){var e=this.generateId();this.nodes.push(Object(y["a"])(Object(y["a"])({},t.node),{},{id:e}))},remove:function(t){var e=k()(this.nodes,{id:t.node.id});this.nodes.splice(e,1)},move:function(t){console.log("move",t);var e=t.dragged,n=t.to;e.parentId=n.id},add:function(t){var e=S();this.nodes.push(Object(y["a"])({id:e},t.node))},onDragStart:function(t){console.log("onDragStart",t),this.dragging=!0}},watch:{}},M=E,T=(n("5c0b"),Object(l["a"])(M,b,w,!1,null,null,null)),W=T.exports;o["a"].use(r["a"]),o["a"].component("DemoBlock",u),o["a"].component("DemoNode",m),o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(W)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var o=n("9c0c"),r=n.n(o);r.a},"5d60":function(t,e,n){"use strict";var o=n("e178"),r=n.n(o);r.a},"66d6":function(t,e){t.exports=[{preview:{title:"New visitor",description:"Triggers when somebody visits a specified page",icon:"eye"},node:{title:"New visitor",description:'<span>When a <span class="font-bold">new visitor</span> goes to <span class="font-bold">Site 1</span></span>',icon:"eyeblue"}},{preview:{title:"Update database",description:"Triggers when somebody performs a specified action",icon:"error"},node:{title:"Update database",description:'<span>Triggers when somebody performs a <span class="font-bold">specified action</span></span>',icon:"errorred"}},{preview:{title:"Time has passed",description:"Triggers after a specified amount of time",icon:"database"},node:{title:"Time has passed",description:'Triggers after a specified <span class="font-bold">amount</span> of time',icon:"databaseorange"}}]},"97ab":function(t,e){t.exports=[{id:"1",parentId:-1,nodeComponent:"demo-node",data:{width:320,text:"Parent block",title:"New Visitor",description:'<span>When a <span class="font-bold">new visitor</span> goes to <span class="font-bold">Site 1</span></span>',icon:"eyeblue"}},{id:"2",parentId:"1",nodeComponent:"demo-node",data:{text:"Parent block",title:"New Visitor",description:'<span>When a <span class="font-bold">new visitor</span> goes to <span class="font-bold">Site 1</span></span>',icon:"eyeblue"}},{id:"3",parentId:"1",nodeComponent:"demo-node",data:{width:320,text:"Parent block",title:"New Visitor",description:'<span>When a <span class="font-bold">new visitor</span> goes to <span class="font-bold">Site 1</span></span>',icon:"eyeblue"}},{id:"4",parentId:"3",nodeComponent:"demo-node",data:{width:200,text:"Parent block",title:"New Visitor",description:'<span>When a <span class="font-bold">new visitor</span> goes to <span class="font-bold">Site 1</span></span>',icon:"eyeblue"}}]},"9c0c":function(t,e,n){},a202:function(t,e,n){},a54e:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flowy-node flex flex-col flex-no-wrap items-center relative overflow-visible"},[n("draggable",{staticClass:"flowy-draggable",attrs:{"with-handle":!1,"draggable-mirror":{xAxis:!1,appendTo:"body"},group:"flowy",data:{draggingNode:t.node}},on:{stop:function(e){return t.onStop(t.node,e)},start:function(e){return t.onStart(t.node,e)}}},[n("flowy-block",t._b({staticClass:"draggable",attrs:{data:t.node,remove:t.removeNode}},"flowy-block",Object.assign({},t.$props,t.passedProps),!1),[n("div",{ref:"block",staticStyle:{position:"absolute",width:"100%",height:"100%"}}),!t.isTopParent&&t.mounted?n("div",{staticClass:"arrowblock -mt-64px overflow-visible",style:t.arrowBlockStyle},[n("svg",{staticClass:"flowy-line",attrs:{preserveaspectratio:"none",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:t.linePath,stroke:"#C5CCD0","stroke-width":"2px"}})])]):t._e(),t.hasChildren&&t.mounted?n("div",{staticClass:"arrowblock-down overflow-visible",style:t.arrowBlockStyle},[n("svg",{staticClass:"flowy-line",attrs:{preserveaspectratio:"none",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:t.linePathDown,stroke:"#C5CCD0","stroke-width":"2px"}})])]):t._e(),n("transition",{attrs:{name:"scale"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showIndicator,expression:"showIndicator"}],staticClass:"indicator",class:{"not-allowed":!this.dropAllowed}})]),n("dropzone",{staticClass:"node-dropzone",attrs:{data:{dropzoneNode:t.node},group:"first_group"},on:{enter:function(e){return t.onEnterDrag({to:t.node})},leave:function(e){return t.onLeaveDrag(e)},drop:function(e){return t.onDrop(e)},receive:function(e){return t.onDragReceive(Object.assign({},e,{to:t.node}))}},scopedSlots:t._u([{key:"default",fn:function(t){return[n("div",{staticClass:"node-dropzone",class:t},[n("div",{})])]}}])})],1)],1),n("div",{staticClass:"flowy-tree flex flex-row flex-no-wrap overflow-visible mt-64px"},[t._l(t.children,(function(e,o){return[n("flowy-node",t._g(t._b({key:e.id,ref:e.id,refInFor:!0,attrs:{index:o,"total-children":t.children.length,node:e,"parent-x":t.xPos}},"flowy-node",Object.assign({},t.$props),!1),Object.assign({},t.$listeners)))]}))],2)],1)},r=[],i=(n("99af"),n("a9e3"),n("5530")),s=(n("2769"),n("9380")),a=n.n(s),d=(n("2768"),n("9b02")),l=n.n(d),c=n("0644"),u=n.n(c);function f(t){var e=t.getBoundingClientRect();return{left:e.left+e.width/2}}var p={props:{index:{type:Number,required:!1},totalChildren:{type:Number,required:!1},node:{type:Object,required:!0},nodes:{type:Array,required:!0},parentX:{type:Number,required:!1},beforeMove:{type:Function,default:function(){return!0}},isDragging:{type:Boolean}},data:function(){return{hoveringWithDrag:!1,mounted:!1,xPosProxy:0,width:0,dropAllowed:!0,timer:null}},mounted:function(){this.mounted=!0,this.timer=setInterval(this.setWidth,200)},destroyed:function(){clearInterval(this.timer)},updated:function(){var t=this;this.$nextTick((function(){t.setWidth()}))},computed:{xPos:function(){return this.mounted?this.xPosProxy:0},hasChildren:function(){return this.children.length>0},showIndicator:function(){return this.hoveringWithDrag},arrowBlockStyle:function(){return{marginLeft:"".concat(this.blockWidth/2,"px")}},lineTotalHeight:function(){return 64},isOddChildren:function(){return 1===Math.abs(this.totalChildren%2)},isMiddle:function(){return this.isOddChildren&&this.index+1===Math.ceil(this.totalChildren/2)},isLeftSide:function(){return this.index+1<=Math.ceil(this.totalChildren/2)},lineStartX:function(){return this.blockWidth/2},blockWidth:function(){return this.width},holderWidth:function(){return this.$refs.block.parentElement.offsetWidth},rowWidth:function(){return this.$refs.block.parentElement.parentElement.offsetWidth},isTopParent:function(){return-1===this.node.parentId},children:function(){return a()(this.nodes,{parentId:this.node.id})},passedProps:function(){return this.node.props},linePathDown:function(){return"M0 0L0 ".concat(this.lineTotalHeight/2,"L0 ").concat(this.lineTotalHeight/2,"L0 ").concat(this.lineTotalHeight/2)},linePath:function(){var t=this.lineTotalHeight/2,e=this.lengthFromMiddle,n=this.isLeftSide?"":"-";return"M".concat(n).concat(e," ").concat(t,"L").concat(n).concat(e," ").concat(t,"L0 ").concat(t,"L0 ").concat(this.lineTotalHeight)},lengthFromMiddle:function(){return Math.abs(this.xPos-this.parentX)}},methods:{setWidth:function(){if(void 0!==this.$refs.block){var t=f(this.$refs.block).left;0!==t&&(this.xPosProxy=t,this.width=this.$refs.block.offsetWidth)}},removeNode:function(){this.$emit("remove",{node:this.node})},draggingNodeFromEvent:function(t){return l()(t,"oldComponent.$attrs.data.draggingNode",!1)},dropzoneNodeFromEvent:function(t){return l()(t,"newComponent.$attrs.data.dropzoneNode",!1)},blockFromNewNodeEvent:function(t){var e=l()(t,"oldComponent.$attrs.data",!1);return{nodeComponent:e.componentName,data:u()(e.props)}},onStop:function(t,e){this.$emit("drag-stop"),this.hoveringWithDrag=!1},onStart:function(t){this.$emit("drag-start",{node:t})},onDrop:function(t){this.$emit("drag-stop"),this.hoveringWithDrag=!1},newNode:function(t,e){this.$emit("add",{node:Object(i["a"])({parentId:e.id},t)})},moveNode:function(t,e){this.$emit("move",{dragged:t,to:e})},onDragReceive:function(t){this.hoveringWithDrag=!1;var e=this.draggingNodeFromEvent(t),n=t.to;if(!1===e){var o=this.blockFromNewNodeEvent(t);this.newNode(o,this.node)}else{var r=this.beforeMove(n);r&&this.moveNode(e,n)}this.dropAllowed=!0},onEnterDrag:function(t){this.hoveringWithDrag=!0,this.dropAllowed=this.beforeMove(t.to)},onLeaveDrag:function(t){this.hoveringWithDrag=!1}}},h=p,g=n("2877"),v=Object(g["a"])(h,o,r,!1,null,null,null);e["a"]=v.exports},af83:function(t,e,n){"use strict";var o=n("a202"),r=n.n(o);r.a},b635:function(t,e,n){"use strict";(function(t){var o=n("952a"),r=n.n(o),i=n("f841"),s=n("a54e"),a=n("2bdc"),d=n("071f");function l(t){var e=t;e.use(r.a,{}),e.component("Flowy",i["a"]),e.component("FlowyNode",s["a"]),e.component("FlowyBlock",a["a"]),e.component("FlowyNewBlock",d["a"])}var c={install:l},u=null;"undefined"!==typeof window?u=window.Vue:"undefined"!==typeof t&&(u=t.Vue),u&&u.use(c),e["a"]=c}).call(this,n("c8ba"))},e178:function(t,e,n){},f841:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flowy overflow-auto",class:{dragging:t.dragging}},[n("div",{staticClass:"flowy-tree flex flex-row flex-no-wrap relative"},t._l(t.parentNodes,(function(e){return n("FlowyNode",t._g(t._b({key:e.id,attrs:{node:e,"before-move":t.onBeforeMove,"is-dragging":t.dragging},on:{"drag-start":function(e){return t.onDragStart(e)},"drag-stop":function(e){return t.onDragStop(e)},"enter-drop":function(e){return t.onEnterDrop(e)}}},"FlowyNode",Object.assign({},t.$props),!1),Object.assign({},t.$listeners)))})),1)])},r=[],i=(n("2769"),n("9380")),s=n.n(i),a={props:{nodes:{type:Array,required:!1},beforeMove:{type:Function,default:function(){return!0}}},data:function(){return{draggingNode:null}},computed:{parentNodes:function(){return s()(this.nodes,{parentId:-1})},rows:function(){return[this.parentNodes]},dragging:function(){return!1!==this.draggingNode&&null!==this.draggingNode}},mounted:function(){},destroyed:function(){},methods:{setNotDragging:function(){var t=this;setTimeout((function(){t.draggingNode=null}),50)},onBeforeMove:function(t){return this.beforeMove({to:t,from:this.draggingNode})},onDrop:function(t){this.setNotDragging()},onDragStart:function(t){this.draggingNode=t.node,this.$emit("drag-start",t)},onDragStop:function(t){this.setNotDragging(),this.$emit("drag-stop",t)},onEnterDrop:function(t){this.$emit("enter-drop",{to:t.to,from:this.draggingNode})},getChildren:function(t){return s()(this.nodes,{parentId:t})},onDragEnd:function(t){}}},d=a,l=(n("af83"),n("2877")),c=Object(l["a"])(d,o,r,!1,null,null,null);e["a"]=c.exports}});