(function(e){function t(t){for(var o,s,a=t[0],d=t[1],l=t[2],u=0,p=[];u<a.length;u++)s=a[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(e[o]=d[o]);c&&c(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var d=n[a];0!==r[d]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={app:0},i=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/flowy-vue/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],d=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var c=d;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"054d":function(e,t,n){"use strict";var o=n("31fd"),r=n.n(o);r.a},"31fd":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=n("952a"),i=n.n(r),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flowy overflow-auto"},[n("div",{staticClass:"flowy-tree flex flex-row flex-no-wrap relative"},e._l(e.parentNodes,(function(t){return n("FlowyNode",e._g(e._b({key:t.id,attrs:{node:t}},"FlowyNode",Object.assign({},e.$props),!1),Object.assign({},e.$listeners)))})),1)])},a=[],d=n("2769"),l=n.n(d),c=n("9380"),u=n.n(c),p={props:{nodes:{type:Array,required:!1},blocks:{type:Array,required:!0}},data:function(){return{}},computed:{parentNodes:function(){return u()(this.nodes,{parentId:-1})},rows:function(){return[this.parentNodes]}},mounted:function(){},destroyed:function(){},methods:{onDrop:function(e){this.dragging=!1},onDragStart:function(e){this.dragging=!0},getChildren:function(e){return u()(this.nodes,{parentId:e})},onDragEnd:function(e){}}},f=p,h=(n("af83"),n("2877")),v=Object(h["a"])(f,s,a,!1,null,null,null),g=v.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flowy-node flex flex-col flex-no-wrap items-center relative overflow-visible"},[n("draggable",{attrs:{"with-handle":!1,"draggable-mirror":{xAxis:!1,appendTo:"body"},group:"flowy",data:{draggingNode:e.node}},on:{drop:function(t){return e.onDrop(e.node,t)}}},[n("flowy-block",e._b({ref:"block",staticClass:"draggable",attrs:{data:e.node,remove:e.removeNode}},"flowy-block",Object.assign({},e.$props,e.passedProps),!1),[!e.isTopParent&&e.mounted?n("div",{staticClass:"arrowblock -mt-64px overflow-visible",style:e.arrowBlockStyle},[n("svg",{attrs:{preserveaspectratio:"none",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:e.linePath,stroke:"#C5CCD0","stroke-width":"2px"}})])]):e._e(),e.hasChildren&&e.mounted?n("div",{staticClass:"arrowblock-down overflow-visible",style:e.arrowBlockStyle},[n("svg",{attrs:{preserveaspectratio:"none",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:e.linePathDown,stroke:"#C5CCD0","stroke-width":"2px"}})])]):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showIndicator,expression:"showIndicator"}],staticClass:"indicator"}),n("dropzone",{staticClass:"node-dropzone",attrs:{data:{dropzoneNode:e.node},group:"first_group"},on:{enter:function(t){return e.onEnterDrag(t)},leave:function(t){return e.onLeaveDrag(t)},drop:function(t){return e.onDragStop(t)},receive:function(t){return e.onDragReceive(t)}},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"node-dropzone",class:t},[n("div",{},[e._v("This is a dropzone")])])]}}])})],1)],1),n("div",{staticClass:"flowy-tree flex flex-row flex-no-wrap overflow-visible mt-64px"},[e._l(e.children,(function(t,o){return[n("flowy-node",e._g(e._b({key:t.id,ref:t.id,refInFor:!0,attrs:{index:o,"total-children":e.children.length,node:t,"parent-x":e.xPos}},"flowy-node",Object.assign({},e.$props),!1),Object.assign({},e.$listeners)))]}))],2)],1)},b=[],w=(n("99af"),n("a9e3"),n("5530")),y=(n("2768"),n("9b02")),x=n.n(y),C=n("0644"),_=n.n(C);function k(e){var t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}}var D={props:{index:{type:Number,required:!1},totalChildren:{type:Number,required:!1},node:{type:Object,required:!0},blocks:{type:Array,required:!0},nodes:{type:Array,required:!0},parentX:{type:Number,required:!1}},data:function(){return{hoveringWithDrag:!1,mounted:!1,xPosProxy:0}},mounted:function(){this.mounted=!0},destroyed:function(){},updated:function(){var e=this;this.$nextTick((function(){void 0!==e.$refs.block&&(e.xPosProxy=k(e.$refs.block.$el).left)}))},computed:{xPos:function(){return this.mounted?this.xPosProxy:0},hasChildren:function(){return this.children.length>0},showIndicator:function(){return this.hoveringWithDrag},arrowBlockStyle:function(){return{marginLeft:"".concat(this.blockWidth/2,"px")}},lineTotalHeight:function(){return 64},isOddChildren:function(){return 1===Math.abs(this.totalChildren%2)},isMiddle:function(){return this.isOddChildren&&this.index+1===Math.ceil(this.totalChildren/2)},isLeftSide:function(){return this.index+1<=Math.ceil(this.totalChildren/2)},lineStartX:function(){return this.blockWidth/2},blockWidth:function(){return this.$refs.block.$el.offsetWidth},holderWidth:function(){return this.$refs.block.$el.parentElement.offsetWidth},rowWidth:function(){return this.$refs.block.$el.parentElement.parentElement.offsetWidth},isTopParent:function(){return-1===this.node.parentId},children:function(){return u()(this.nodes,{parentId:this.node.id})},passedProps:function(){return this.node.props},linePathDown:function(){return"M0 0L0 ".concat(this.lineTotalHeight/2,"L0 ").concat(this.lineTotalHeight/2,"L0 ").concat(this.lineTotalHeight/2)},linePath:function(){var e=this.lineTotalHeight/2,t=this.lengthFromMiddle,n=this.isLeftSide?"":"-";return"M".concat(n).concat(t," ").concat(e,"L").concat(n).concat(t," ").concat(e,"L0 ").concat(e,"L0 ").concat(this.lineTotalHeight)},lengthFromMiddle:function(){return Math.abs(this.xPos-this.parentX)}},methods:{removeNode:function(){this.$emit("remove",{node:this.node})},draggingNodeFromEvent:function(e){return x()(e,"oldComponent.$attrs.data.draggingNode",!1)},dropzoneNodeFromEvent:function(e){return x()(e,"newComponent.$attrs.data.dropzoneNode",!1)},blockFromNewNodeEvent:function(e){var t=x()(e,"oldComponent.$attrs.data",!1);return{nodeComponent:t.componentName,data:_()(t.props)}},onDrop:function(e,t){this.hoveringWithDrag=!0},onDragStop:function(e){console.log(e),this.hoveringWithDrag=!1},newNode:function(e,t){console.log("newNode",t),this.$emit("add",{node:Object(w["a"])({parentId:t.id},e)})},moveNode:function(e,t){console.log("moveNode",e,t),this.$emit("move",{dragged:e,to:t})},onDragReceive:function(e){console.log("onDragReceive",e),this.hoveringWithDrag=!1;var t=this.draggingNodeFromEvent(e);if(!1===t){var n=this.blockFromNewNodeEvent(e);this.newNode(n,this.node)}else this.moveNode(t,this.node)},onEnterDrag:function(e){console.log("onEnterDag",e),this.hoveringWithDrag=!0},onLeaveDrag:function(e){this.hoveringWithDrag=!1}}},N=D,O=Object(h["a"])(N,m,b,!1,null,null,null),j=O.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flowy-block mr-24px relative"},[e._t("default"),n(e.component,e._b({ref:"block",tag:"component"},"component",Object.assign({},e.$props,e.$attrs,e.passedProps),!1))],2)},S=[],E={props:{node:{type:Object,required:!0},remove:{type:Function,required:!0}},data:function(){return{}},mounted:function(){},destroyed:function(){},computed:{component:function(){return this.node.nodeComponent},passedProps:function(){return this.node.data}},methods:{onDragEnd:function(e){},onDragStart:function(e){}},render:function(e){var t=this.$scopedSlots.default()[0];return t}},P=E,T=Object(h["a"])(P,$,S,!1,null,null,null),M=T.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flowy-block mr-24px relative"},[n("draggable",{attrs:{"with-handle":!1,"draggable-mirror":{xAxis:!1,appendTo:"body"},group:"flowy",data:Object.assign({},{type:"new"},e.nodeData)}},[e._t("preview")],2)],1)},q=[],W={props:{},data:function(){return{node:{componentName:"",props:{}}}},mounted:function(){var e=this.$scopedSlots.node()[0];this.node.componentName=e.componentOptions.tag,this.node.props=Object(w["a"])(Object(w["a"])({},e.componentOptions.propsData),e.data.attrs)},destroyed:function(){},computed:{nodeData:function(){return this.node}},methods:{remove:function(){}}},I=W,L=Object(h["a"])(I,F,q,!1,null,null,null),z=L.exports,A={install:function(e){var t=e;t.use(i.a),t.component("Flowy",g),t.component("FlowyNode",j),t.component("FlowyBlock",M),t.component("FlowyNewBlock",z)}},B=A,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"example-block p-2 bg-white mb-4 rounded border border-gray-300"},[n("div",{staticClass:"flex flex-row flex-no-wrap ml-2"},[n("div",{staticClass:"flex-none flex\n     flex-row flex-no-wrap items-start justify-start",staticStyle:{width:"60px"}},[e._m(0),n("div",{staticClass:"flex-grow bg-blue-100 p-1 ml-2 mr-2 rounded"},[n("img",{attrs:{src:"demo_assets/"+e.icon+".svg"}})])]),n("div",{staticClass:"flex-grow flex flex-col ml-2"},[n("div",{staticClass:"font-bold text-base text-gray-800"},[e._v(" "+e._s(e.title)+" ")]),n("div",{staticClass:"text-xs text-gray-600"},[e._v(" "+e._s(e.description)+" ")])])])])},R=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex-none drag-handle mt-2 mr-2"},[n("img",{staticStyle:{width:"10px"},attrs:{src:"demo_assets/grabme.svg"}})])}],V={props:{icon:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},remove:{type:Function,required:!1}},data:function(){return{}},mounted:function(){},destroyed:function(){},methods:{}},X=V,J=(n("054d"),Object(h["a"])(X,H,R,!1,null,null,null)),U=J.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"example-node relative  bg-white rounded border border-gray-300"},[n("div",{staticClass:"flex flex-col border-b border-gray-300"},[n("div",{staticClass:"flex flex-row flex-no-wrap justify-between items-center p-4"},[n("div",{staticClass:"flex flex-row flex-no-wrap justify-start items-center"},[n("div",{staticClass:"flex-shrink bg-blue-2 mr-2"},[n("img",{attrs:{src:"demo_assets/"+e.icon+".svg"}})]),n("div",{staticClass:"font-bold text-md text-gray-800"},[e._v(" "+e._s(e.title)+" "),n("span",{staticClass:"text-xs text-gray-400"},[e._v("node id: "+e._s(e.node.id))])])]),n("div",{on:{click:function(t){e.dropdown=!e.dropdown}}},[n("img",{staticClass:"drag-handle",attrs:{src:"demo_assets/grabme.svg"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.dropdown,expression:"dropdown"}],staticClass:"absolute z-50 -ml-10 py-2 bg-white shadow rounded text-xs"},[n("span",{staticClass:"cursor-pointer p-2 hover:bg-gray-200",on:{click:function(t){return e.remove()}}},[e._v("remove")])])])])]),n("div",{staticClass:"flex flex-row flex-no-wrap ml-4 mb-4"},[n("div",{staticClass:"flex-grow flex flex-col"},[n("div",{staticClass:"mt-2 text-sm text-gray-700",domProps:{innerHTML:e._s(e.description)}})])])])},G=[],K={props:{remove:{type:Function,required:!0},node:{type:Object,required:!0},icon:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,required:!0}},data:function(){return{dropdown:!1}},mounted:function(){},destroyed:function(){},methods:{}},Q=K,Z=(n("5d60"),Object(h["a"])(Q,Y,G,!1,null,null,null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h-screen w-screen bg-gray-200 flex flex-col flex-no-wrap overflow-none"},[e._m(0),n("div",{staticClass:"flex-grow overflow-hidden flex flex-row flex-no-wrap"},[n("div",{staticClass:"z-40 flex-shrink pl-6 pt-6 bg-white border-r border-grey-400"},[n("div",{staticClass:"side z-50"},[n("div",{staticClass:"text-lg font-bold mb-4"},[e._v("Blocks")]),n("div",e._l(e.blocks,(function(t,o){return n("flowy-new-block",{key:o,scopedSlots:e._u([{key:"preview",fn:function(e){return[n("demo-block",{attrs:{title:t.preview.title,description:t.preview.description,icon:t.preview.icon}})]}},{key:"node",fn:function(e){return[n("demo-node",{attrs:{title:t.node.title,description:t.node.description,icon:t.node.icon}})]}}],null,!0)})})),1)])]),n("div",{staticClass:"flex-grow overflow-auto"},[n("flowy",{staticClass:"h-full w-full p-6",attrs:{nodes:e.nodes,blocks:e.blocks,onEnterDragFn:e.onEnter,beforeEmptyDrop:e.onEmptyDrop,beforeMove:e.beforeMove,beforeAdd:e.beforeAdd},on:{onDrag:e.onDragStart,afterEmptyDrop:e.onEmptyDrop,afterMove:e.onMove,add:e.add,move:e.move,remove:e.remove}})],1)])])},ne=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bg-white p-6 shadow z-10"},[n("div",{staticClass:"text-lg"},[e._v("Vue Flowy")])])}],oe=(n("a434"),n("51f5")),re=n.n(oe);function ie(){return Math.floor(1e4*Math.random())+1}function se(e){var t=ie();while(void 0!==l()(e,{id:t}))t=ie();return t}var ae=se,de={name:"app",components:{Flowy:g,FlowyNode:j},data:function(){return{holder:[],dragging:!1,blocks:[{preview:{title:"New visitor",description:"Triggers when somebody visits a specified page",icon:"eye"},node:{title:"New visitor",description:'<span>When a <span class="font-bold">new visitor</span> goes to <span class="font-bold">Site 1</span></span>',icon:"eyeblue"}},{preview:{title:"Update database",description:"Triggers when somebody performs a specified action",icon:"error"},node:{title:"Update database",description:'<span>Triggers when somebody performs a <span class="font-bold">specified action</span></span>',icon:"errorred"}},{preview:{title:"Time has passed",description:"Triggers after a specified amount of time",icon:"database"},node:{title:"Time has passed",description:'Triggers after a specified <span class="font-bold">amount</span> of time',icon:"databaseorange"}}],nodes:[{id:"1",parentId:-1,nodeComponent:"demo-node",data:{text:"Parent block",title:"New Visitor",description:'<span>When a <span class="font-bold">new visitor</span> goes to <span class="font-bold">Site 1</span></span>',icon:"eyeblue"}},{id:"2",parentId:"1",nodeComponent:"demo-node",data:{text:"Parent block",title:"New Visitor",description:'<span>When a <span class="font-bold">new visitor</span> goes to <span class="font-bold">Site 1</span></span>',icon:"eyeblue"}},{id:"3",parentId:"1",nodeComponent:"demo-node",data:{text:"Parent block",title:"New Visitor",description:'<span>When a <span class="font-bold">new visitor</span> goes to <span class="font-bold">Site 1</span></span>',icon:"eyeblue"}}]}},methods:{onDropBlock:function(e){},beforeAdd:function(){return console.log("before add"),!0},afterAdd:function(){},beforeMove:function(){return console.log("before move"),!0},onEmptyDrop:function(e){console.log(e)},onMove:function(e){console.log(e)},onEnter:function(){},addNode:function(e){var t=this.generateId();this.nodes.push(Object(w["a"])(Object(w["a"])({},e.node),{},{id:t}))},remove:function(e){var t=re()(this.nodes,{id:e.node.id});console.log(t),this.nodes.splice(t,1)},move:function(e){var t=e.dragged,n=e.to;t.parentId=n.id},add:function(e){var t=ae();this.nodes.push(Object(w["a"])({id:t},e.node))},onDragStart:function(e){this.dragging=!0}},watch:{}},le=de,ce=(n("5c0b"),Object(h["a"])(le,te,ne,!1,null,null,null)),ue=ce.exports;o["a"].use(B),o["a"].component("DemoBlock",U),o["a"].component("DemoNode",ee),o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(ue)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var o=n("9c0c"),r=n.n(o);r.a},"5d60":function(e,t,n){"use strict";var o=n("e178"),r=n.n(o);r.a},"9c0c":function(e,t,n){},a202:function(e,t,n){},af83:function(e,t,n){"use strict";var o=n("a202"),r=n.n(o);r.a},e178:function(e,t,n){}});
//# sourceMappingURL=app.6b9ef5a1.js.map